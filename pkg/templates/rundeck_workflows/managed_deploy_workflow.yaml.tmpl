# Generated by openapi-operator-gen {{ .GeneratorVersion }}
# Deploy and verify managed {{ .Kind }} "{{ .CRName }}" workflow
- defaultTab: output
  description: |-
    Deploy managed {{ .Kind }} "{{ .CRName }}" and verify it was applied successfully.
    Steps: apply-{{ .KindLower }}-{{ .CRName }} -> status-{{ .KindLower }}-{{ .CRName }}
  executionEnabled: true
  group: workflows/managed
  loglevel: INFO
  name: deploy-{{ .KindLower }}-{{ .CRName }}
  nodeFilterEditable: false
  options:
  - name: namespace
    description: "Kubernetes namespace (defaults to project setting)"
    value: '${globals.namespace}'
  - name: dry_run
    description: "Preview without applying"
    enforced: true
    values:
    - 'true'
    - 'false'
    value: 'false'
  scheduleEnabled: true
  sequence:
    commands:
    - jobref:
        name: apply-{{ .KindLower }}-{{ .CRName }}
        group: managed/{{ .KindLower }}-{{ .CRName }}
        args: "-namespace ${option.namespace} -dry_run ${option.dry_run}"
      description: "Apply {{ .Kind }} {{ .CRName }}"
    - jobref:
        name: status-{{ .KindLower }}-{{ .CRName }}
        group: managed/{{ .KindLower }}-{{ .CRName }}
        args: "-namespace ${option.namespace}"
      description: "Verify {{ .Kind }} {{ .CRName }} status"
    keepgoing: false
    strategy: node-first
