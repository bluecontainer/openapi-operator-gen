# Generated by openapi-operator-gen {{ .GeneratorVersion }}
# Multi-stage build for kubectl plugin Docker image
FROM golang:1.25 AS builder
WORKDIR /workspace
COPY go.mod go.sum ./
RUN go mod download
COPY . .
RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -o /kubectl-{{ .AppName }} .

FROM bitnami/kubectl:latest
USER root
COPY --from=builder /kubectl-{{ .AppName }} /usr/local/bin/kubectl-{{ .AppName }}
RUN chmod +x /usr/local/bin/kubectl-{{ .AppName }}
USER 1001
